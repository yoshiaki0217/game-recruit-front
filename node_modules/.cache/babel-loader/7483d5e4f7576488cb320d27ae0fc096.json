{"ast":null,"code":"import _taggedTemplateLiteral from \"/usr/src/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _slicedToArray from \"/usr/src/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/usr/src/app/src/pages/GroupDetail.jsx\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _templateObject,\n    _templateObject2;\n\nimport { useState, useEffect } from \"react\";\nimport axios from 'axios';\nimport styled from \"styled-components\";\nimport { PrimaryButton, Footer, HeaderBackButton } from '../components/index';\nimport DefaultIcon from '../images/default-icon.png';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar GroupDetail = function GroupDetail(props) {\n  _s();\n\n  // ログイン機能が完了したらログインしているユーザーのIDを取得\n  var loginedUserId = Number(localStorage.getItem('userId'));\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      groupData = _useState2[0],\n      setGroupData = _useState2[1]; // オブジェクトになっているせいなのか、groupDataからmst_gameのゲーム名が取得できず、仕方なくゲーム名用の変数作成\n  // API呼び出し時にresponseから直接参照すると取得できるので、その際にこのgameNameにセットしている\n  // よく分からないので、とりあえずこの方法で対応\n\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      gameName = _useState4[0],\n      setGameName = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      styleName = _useState6[0],\n      setStyleName = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      groupMember = _useState8[0],\n      setGroupMember = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      postData = _useState10[0],\n      setPostData = _useState10[1];\n\n  var groupId = props.match.params.id;\n  useEffect(function () {\n    var unmounted = false;\n\n    if (!unmounted) {\n      getGroup(groupId);\n      getGroupMember(groupId);\n      getPost(groupId);\n    }\n  }, [groupId]);\n\n  var getGroup = function getGroup(id) {\n    var url = process.env.REACT_APP_BACKEND_PATH;\n    axios.get(url + '/api/groups/groupid/' + id).then(function (res) {\n      setGroupData(res.data.results);\n      setGameName(res.data.results.mst_game.game_name);\n      setStyleName(res.data.results.mst_style.style_name);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  var getGroupMember = function getGroupMember(id) {\n    var url = process.env.REACT_APP_BACKEND_PATH;\n    axios.get(url + '/api/group/member/' + id).then(function (res) {\n      setGroupMember(res.data.results);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  var _useState11 = useState(\"hidden\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      styledHidden = _useState12[0],\n      setStyledHidden = _useState12[1];\n\n  var onClickToggle = function onClickToggle() {\n    setStyledHidden(!styledHidden ? \"hidden\" : \"\");\n  };\n\n  var getPost = function getPost(id) {\n    var url = process.env.REACT_APP_BACKEND_PATH;\n    axios.get(url + '/api/post/' + id).then(function (res) {\n      setPostData(res.data.results);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  var onClickUpsertPost = function onClickUpsertPost() {\n    var url = process.env.REACT_APP_BACKEND_PATH;\n    var statusFlag = postData && postData.status_flag === 0 ? 1 : 0;\n    axios.post(url + '/api/post/upsert', {\n      groupId: groupId,\n      statusFlag: statusFlag\n    }).then(function (res) {\n      setPostData(res.data.results);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(GroupDetailWrap, {\n    className: \"h-screen bg-sub\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-sub py-16\",\n      children: [/*#__PURE__*/_jsxDEV(HeaderBackButton, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(PostItem, {\n        className: \"psot-item w-80 bg-white px-5 pb-2 pt-6 mb-6 m-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: groupData.leader_id === loginedUserId ? '' : 'hidden',\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            className: \"block bg-sub text-center p-1 text-xs ml-auto py-1 px-4 w-20\",\n            to: '/group/edit/' + groupData.id,\n            children: \"\\u7DE8\\u96C6\\u3059\\u308B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex mb-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"profile-logo\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"rounded-full\",\n              src: groupData.icon === null ? DefaultIcon : groupData.icon,\n              alt: \"\\u30D7\\u30ED\\u30D5\\u30A3\\u30FC\\u30EB\\u753B\\u50CF\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 41\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"post-team-name text-2xl ml-3 pt-4 break-all w-6.5/10\",\n            children: groupData.group_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"post-list-item truncate\",\n          children: gameName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"post-list-item\",\n          children: [\"\\u30B9\\u30BF\\u30A4\\u30EB:\", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: styleName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 46\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"post-list-item\",\n          children: [\"\\u52DF\\u96C6\\u4EBA\\u6570:\", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: groupData.recruitment\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 46\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"post-list-item\",\n            children: [\"\\u53C2\\u52A0\\u4EBA\\u6570:\", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: groupData.participants\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 48\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: onClickToggle,\n            className: groupMember[0] ? \"\" : \"hidden\",\n            children: /*#__PURE__*/_jsxDEV(PrimaryButton, {\n              styles: \"bg-sub tex p-1 text-xs\",\n              children: \"\\u30E1\\u30F3\\u30D0\\u30FC\\u4E00\\u89A7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styledHidden,\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"friend-list mb-8\",\n            children: groupMember.map(function (data, index) {\n              return /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex items-center mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"firend-logo\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    className: \"rounded-full\",\n                    src: data.user.icon === null ? DefaultIcon : data.user.icon,\n                    alt: \"\\u30D7\\u30ED\\u30D5\\u30A3\\u30FC\\u30EB\\u753B\\u50CF\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 123,\n                    columnNumber: 50\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 123,\n                  columnNumber: 23\n                }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"ml-2\",\n                  children: data.user.user_name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 23\n                }, _this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 21\n              }, _this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u30B0\\u30EB\\u30FC\\u30D7\\u8A73\\u7D30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"post-detail\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: groupData.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: groupData.leader_id === loginedUserId ? '' : 'hidden',\n          children: /*#__PURE__*/_jsxDEV(PrimaryButton, {\n            styles: \"bg-sub py-1 px-7 py-2 text-sm m-auto\",\n            onClick: onClickUpsertPost,\n            children: postData && postData.status_flag === 0 ? \"募集をやめる\" : \"募集する\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(GroupDetail, \"uDcY60BQW9swy4eOosOMnoYHwZc=\");\n\n_c = GroupDetail;\nvar GroupDetailWrap = styled.section(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \\n\"])));\n_c2 = GroupDetailWrap;\nvar PostItem = styled.div(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  position: relative;\\n  .profile-logo img{\\n    width: 65px;\\n    height: 65px;\\n  }\\n  .firend-logo img{\\n    width: 40px;\\n    height: 40px;\\n  }\\n  .post-list-item span{\\n    margin:0 0 0 10px;\\n  }\\n  .post-detail{\\n    width: 100%;\\n    margin: 0 0 18px 0;\\n    padding: 0 3px;\\n    overflow: hidden;\\n  }\\n  .primary-button{\\n    \\n    color:#fff;\\n  }\\n\"])));\n_c3 = PostItem;\nexport default GroupDetail;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"GroupDetail\");\n$RefreshReg$(_c2, \"GroupDetailWrap\");\n$RefreshReg$(_c3, \"PostItem\");","map":{"version":3,"sources":["/usr/src/app/src/pages/GroupDetail.jsx"],"names":["useState","useEffect","axios","styled","PrimaryButton","Footer","HeaderBackButton","DefaultIcon","Link","GroupDetail","props","loginedUserId","Number","localStorage","getItem","groupData","setGroupData","gameName","setGameName","styleName","setStyleName","groupMember","setGroupMember","postData","setPostData","groupId","match","params","id","unmounted","getGroup","getGroupMember","getPost","url","process","env","REACT_APP_BACKEND_PATH","get","then","res","data","results","mst_game","game_name","mst_style","style_name","catch","error","console","log","styledHidden","setStyledHidden","onClickToggle","onClickUpsertPost","statusFlag","status_flag","post","leader_id","icon","group_name","recruitment","participants","map","index","user","user_name","description","GroupDetailWrap","section","PostItem","div"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from 'axios';\nimport styled from \"styled-components\";\nimport {\n  PrimaryButton,\n  Footer,\n  HeaderBackButton\n} from '../components/index';\nimport DefaultIcon from '../images/default-icon.png'\nimport { Link } from 'react-router-dom';\n\nconst GroupDetail = (props) => {\n  // ログイン機能が完了したらログインしているユーザーのIDを取得\n  const loginedUserId = Number(localStorage.getItem('userId'));\n  const [groupData, setGroupData] = useState([]);\n  // オブジェクトになっているせいなのか、groupDataからmst_gameのゲーム名が取得できず、仕方なくゲーム名用の変数作成\n  // API呼び出し時にresponseから直接参照すると取得できるので、その際にこのgameNameにセットしている\n  // よく分からないので、とりあえずこの方法で対応\n  const [gameName, setGameName] = useState('');\n  const [styleName, setStyleName] = useState('');\n  const [groupMember, setGroupMember] = useState([]);\n  const [postData, setPostData] = useState([]);\n  const groupId = props.match.params.id;\n\n  useEffect(() => {\n    let unmounted = false;\n    if(!unmounted) {\n      getGroup(groupId);\n      getGroupMember(groupId);\n      getPost(groupId);\n    }\n  },[groupId])\n\n  const getGroup = (id) => {\n    let url = process.env.REACT_APP_BACKEND_PATH;\n\n    axios.get(url + '/api/groups/groupid/' + id)\n    .then((res) => {\n      setGroupData(res.data.results);\n      setGameName(res.data.results.mst_game.game_name);\n      setStyleName(res.data.results.mst_style.style_name);\n    })\n    .catch((error) => {\n      console.log(error);\n    })\n  }\n\n  const getGroupMember = (id) => {\n    let url = process.env.REACT_APP_BACKEND_PATH;\n\n    axios.get(url + '/api/group/member/' + id)\n    .then((res) => {\n      setGroupMember(res.data.results);\n    })\n    .catch((error) => {\n      console.log(error);\n    })\n  }\n\n  const [styledHidden, setStyledHidden] = useState(\"hidden\");\n  \n  const onClickToggle = () => {\n    setStyledHidden(!styledHidden　? \"hidden\" : \"\" );\n  }\n\n  const getPost = (id) => {\n    let url = process.env.REACT_APP_BACKEND_PATH;\n\n    axios.get(url + '/api/post/' + id)\n    .then((res) => {\n      setPostData(res.data.results);\n    })\n    .catch((error) => {\n      console.log(error);\n    })\n  }\n\n  const onClickUpsertPost = () => {\n    let url = process.env.REACT_APP_BACKEND_PATH;\n    let statusFlag = postData && postData.status_flag === 0  ? 1 : 0;\n\n    axios.post(url + '/api/post/upsert', {\n      groupId : groupId,\n      statusFlag : statusFlag,\n    })\n    .then((res) => {\n      setPostData(res.data.results);\n    })\n    .catch((error) => {\n      console.log(error);\n    })\n  }\n\n  return (\n    <GroupDetailWrap className=\"h-screen bg-sub\">\n      <div className=\"bg-sub py-16\">\n        <HeaderBackButton />\n        <PostItem className=\"psot-item w-80 bg-white px-5 pb-2 pt-6 mb-6 m-auto\">\n          <div className={groupData.leader_id === loginedUserId ? '' : 'hidden'}>\n            <Link className=\"block bg-sub text-center p-1 text-xs ml-auto py-1 px-4 w-20\" to={'/group/edit/' + groupData.id}>\n              編集する\n            </Link>\n          </div>\n          <div className=\"flex mb-5\">\n            <p className=\"profile-logo\"><img className=\"rounded-full\" src={ groupData.icon === null ? DefaultIcon : groupData.icon } alt=\"プロフィール画像\" /></p>\n            <h3 className=\"post-team-name text-2xl ml-3 pt-4 break-all w-6.5/10\">{ groupData.group_name }</h3>\n          </div>\n          <p className=\"post-list-item truncate\">{ gameName }</p>\n          <p className=\"post-list-item\">スタイル:<span>{ styleName }</span></p>\n          <p className=\"post-list-item\">募集人数:<span>{ groupData.recruitment }</span></p>\n          <div className=\"flex justify-between mb-4\">\n            <p className=\"post-list-item\">参加人数:<span>{ groupData.participants }</span></p>\n            <div onClick={ onClickToggle } className={ groupMember[0] ? \"\" : \"hidden\" }>\n              <PrimaryButton styles={ \"bg-sub tex p-1 text-xs\" }>メンバー一覧</PrimaryButton>\n            </div>\n          </div>\n          <div className={ styledHidden }>\n            <ul className=\"friend-list mb-8\">\n              {\n                groupMember.map((data, index) => {\n                  return (\n                    <li key={index} className=\"flex items-center mb-3\">\n                      <p className=\"firend-logo\"><img className=\"rounded-full\" src={ data.user.icon === null ? DefaultIcon : data.user.icon } alt=\"プロフィール画像\" /></p>\n                      <p className=\"ml-2\">{ data.user.user_name }</p>\n                    </li>\n                  )\n                })\n              }\n            </ul>\n          </div>\n          <p>グループ詳細</p>\n          <div className=\"post-detail\">\n            <p>\n              { groupData.description }\n            </p>\n          </div>\n          <div className={groupData.leader_id === loginedUserId ? '' : 'hidden'}>\n            <PrimaryButton styles={\"bg-sub py-1 px-7 py-2 text-sm m-auto\"} onClick={ onClickUpsertPost }>{ postData && postData.status_flag === 0 ? \"募集をやめる\" : \"募集する\" }</PrimaryButton>\n          </div>\n        </PostItem>\n        <Footer />\n      </div>\n    </GroupDetailWrap>\n  )\n}\n\nconst GroupDetailWrap = styled.section`\n  \n`\nconst PostItem = styled.div`\n  position: relative;\n  .profile-logo img{\n    width: 65px;\n    height: 65px;\n  }\n  .firend-logo img{\n    width: 40px;\n    height: 40px;\n  }\n  .post-list-item span{\n    margin:0 0 0 10px;\n  }\n  .post-detail{\n    width: 100%;\n    margin: 0 0 18px 0;\n    padding: 0 3px;\n    overflow: hidden;\n  }\n  .primary-button{\n    \n    color:#fff;\n  }\n`\n\nexport default GroupDetail"]},"metadata":{},"sourceType":"module"}