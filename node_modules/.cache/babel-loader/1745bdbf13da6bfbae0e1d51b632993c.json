{"ast":null,"code":"import _taggedTemplateLiteral from \"/usr/src/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _defineProperty from \"/usr/src/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/usr/src/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/usr/src/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/usr/src/app/src/pages/GroupEdit.jsx\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _templateObject,\n    _templateObject2;\n\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useHistory } from 'react-router-dom';\nimport styled from \"styled-components\";\nimport { PrimaryButton, InputText, Footer, HeaderBackButton } from '../components/index';\nimport DefaultIcon from '../images/default-icon.png';\nimport Joi from 'joi-browser';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar GroupEdit = function GroupEdit(props) {\n  _s();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      gameStyles = _useState2[0],\n      setGameStyles = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      groupData = _useState4[0],\n      setGroupData = _useState4[1]; // オブジェクトになっているせいなのか、groupDataからmst_gameのゲーム名が取得できず、仕方なくゲーム名用の変数作成\n  // API呼び出し時にresponseから直接参照すると取得できるので、その際にこのgameNameにセットしている\n  // よく分からないので、とりあえずこの方法で対応\n\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      gameName = _useState6[0],\n      setGameName = _useState6[1];\n\n  var _useState7 = useState(DefaultIcon),\n      _useState8 = _slicedToArray(_useState7, 2),\n      thumbnail = _useState8[0],\n      setThumbnail = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      groupMember = _useState10[0],\n      setGroupMember = _useState10[1];\n\n  var groupId = props.match.params.id;\n  var history = useHistory();\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      errorMessages = _useState12[0],\n      setValidationMessages = _useState12[1];\n\n  var _useState13 = useState({\n    'id': '',\n    'icon': '',\n    'group_name': '',\n    'style_id': '',\n    'recruitment': '',\n    'description': ''\n  }),\n      _useState14 = _slicedToArray(_useState13, 2),\n      formData = _useState14[0],\n      setFormData = _useState14[1];\n\n  useEffect(function () {\n    var unmounted = false;\n\n    if (!unmounted) {\n      getGroup(groupId);\n      getGroupMember(groupId);\n      getGameStyle();\n    }\n  }, [groupId]);\n\n  var getGameStyle = function getGameStyle() {\n    var url = process.env.REACT_APP_BACKEND_PATH;\n    axios.get(url + '/api/game/styles').then(function (res) {\n      setGameStyles(res.data.results);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  var getGroup = function getGroup(id) {\n    var url = process.env.REACT_APP_BACKEND_PATH;\n    axios.get(url + '/api/groups/groupid/' + id).then(function (res) {\n      var _res$data$results = res.data.results,\n          id = _res$data$results.id,\n          icon = _res$data$results.icon,\n          group_name = _res$data$results.group_name,\n          style_id = _res$data$results.style_id,\n          recruitment = _res$data$results.recruitment,\n          description = _res$data$results.description;\n      setGroupData(res.data.results);\n      setThumbnail(res.data.results.icon === null ? DefaultIcon : res.data.results.icon);\n      setGameName(res.data.results.mst_game.game_name);\n      setFormData({\n        'id': id,\n        'icon': icon,\n        'group_name': group_name,\n        'style_id': style_id,\n        'recruitment': recruitment,\n        'description': description\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  var getGroupMember = function getGroupMember(id) {\n    var url = process.env.REACT_APP_BACKEND_PATH;\n    axios.get(url + '/api/group/member/' + id).then(function (res) {\n      setGroupMember(res.data.results);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  var schema = Joi.object({\n    id: Joi.number().required(),\n    icon: Joi,\n    group_name: Joi.string().max(256).required().error(function (errors) {\n      errors.forEach(function (err) {\n        switch (err.type) {\n          case \"any.empty\":\n            err.message = \"＊グループ名は必須です\";\n            break;\n\n          case \"string.max\":\n            err.message = \"\\uFF0A\\u30B0\\u30EB\\u30FC\\u30D7\\u540D\\u306F\".concat(err.context.limit, \"\\u6587\\u5B57\\u4EE5\\u5185\\u3067\\u8A2D\\u5B9A\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\");\n            break;\n\n          default:\n            break;\n        }\n      });\n      return new Error(errors);\n    }),\n    style_id: Joi.number().required().error(function (errors) {\n      errors.forEach(function (err) {\n        switch (err.type) {\n          case \"any.empty\":\n            err.message = \"＊スタイルは必須です\";\n            break;\n\n          case \"number.base\":\n            err.message = \"\\uFF0A\\u30B9\\u30BF\\u30A4\\u30EB\\u306F\\u9078\\u629E\\u80A2\\u304B\\u3089\\u9078\\u3093\\u3067\\u304F\\u3060\\u3055\\u3044\";\n            break;\n\n          default:\n            break;\n        }\n      });\n      return new Error(errors);\n    }),\n    recruitment: Joi.number().required().error(function (errors) {\n      errors.forEach(function (err) {\n        switch (err.type) {\n          case \"any.empty\":\n            err.message = \"＊募集人数は必須です\";\n            break;\n\n          case \"number.base\":\n            err.message = \"\\uFF0A\\u52DF\\u96C6\\u4EBA\\u6570\\u306F\\u6570\\u5B57\\u3092\\u6307\\u5B9A\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\";\n            break;\n\n          default:\n            break;\n        }\n      });\n      return new Error(errors);\n    }),\n    description: Joi.string().required().max(5000).error(function (errors) {\n      errors.forEach(function (err) {\n        switch (err.type) {\n          case \"any.empty\":\n            err.message = \"＊詳細は必須です\";\n            break;\n\n          case \"string.max\":\n            err.message = \"\\uFF0A\\u8A73\\u7D30\\u306F\".concat(err.context.limit, \"\\u6587\\u5B57\\u4EE5\\u5185\\u3067\\u8A2D\\u5B9A\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\");\n            break;\n\n          default:\n            break;\n        }\n      });\n      return new Error(errors);\n    })\n  });\n\n  var _useState15 = useState(\"hidden\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      styledHidden = _useState16[0],\n      setStyledHidden = _useState16[1];\n\n  var onChangeEvent = function onChangeEvent(e) {\n    var name = e.target.name;\n    setFormData(_objectSpread(_objectSpread({}, formData), {}, _defineProperty({}, name, e.target.value)));\n  };\n\n  var onClickToggle = function onClickToggle() {\n    setStyledHidden(!styledHidden ? \"hidden\" : \"\");\n  };\n\n  var onClickSaveGroupData = function onClickSaveGroupData() {\n    var url = process.env.REACT_APP_BACKEND_PATH;\n    var formDatas = new FormData();\n    var validationCheckFlag = false; // バリデーション実行\n\n    var _schema$validate = schema.validate(formData, {\n      abortEarly: false\n    }),\n        error = _schema$validate.error;\n\n    if (error) {\n      var messages = error.message.split(',');\n      setValidationMessages(messages);\n      return false;\n    } else {\n      validationCheckFlag = true;\n    }\n\n    formDatas.append(\"id\", formData.id);\n    formDatas.append(\"icon\", formData.icon);\n    formDatas.append(\"group_name\", formData.group_name);\n    formDatas.append(\"style_id\", formData.style_id);\n    formDatas.append(\"recruitment\", formData.recruitment);\n    formDatas.append(\"description\", formData.description);\n    var config = {\n      headers: {\n        \"content-type\": \"multipart/form-data\"\n      }\n    };\n\n    if (validationCheckFlag) {\n      axios.post(url + '/api/group/edit', formDatas, config).then(function (res) {\n        history.push('/group/detail/' + res.data.results.id);\n      }).catch(function (error) {\n        // エラーメッセージの配列を用意\n        var messages = []; // レスポンスをオブジェクトから配列に変換\n\n        var arr = Object.entries(error.response.data.errors); // レスポンスの配列からメッセージだけを取り出し、エラーメッセージの配列にセット\n\n        arr.forEach(function (value) {\n          messages.push(value[1][0]);\n        }); // 表示用の配列にセット\n\n        setValidationMessages(messages);\n      });\n    }\n  };\n\n  var setImage = function setImage(e) {\n    var name = e.target.name;\n    var files = e.target;\n\n    if (files.files[0] !== undefined) {\n      var file = files.files[0];\n      var type = file.type;\n\n      if (type !== \"image/jpeg\" && type !== \"image/png\" && type !== \"image/webp\") {\n        alert(\"選択されたファイルはアップロードできません\");\n        return false;\n      }\n\n      setFormData(_objectSpread(_objectSpread({}, formData), {}, _defineProperty({}, name, file)));\n\n      if (type.startsWith(\"image/\")) {\n        setThumbnail(window.URL.createObjectURL(file));\n      }\n    } else {\n      setFormData(_objectSpread(_objectSpread({}, formData), {}, _defineProperty({}, name, '')));\n    }\n  };\n\n  var changeIcon = function changeIcon() {\n    var icon = document.getElementById('icon');\n    icon.click();\n  };\n\n  return /*#__PURE__*/_jsxDEV(GroupDetailWrap, {\n    className: \"h-screen bg-sub py-16\",\n    children: [/*#__PURE__*/_jsxDEV(HeaderBackButton, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: errorMessages.length === 0 ? 'hidden' : 'bg-red-100 w-80 mx-auto p-1 mb-2',\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"mx-auto px-3 text-red-600\",\n        children: errorMessages.map(function (item, index) {\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            children: item\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 17\n          }, _this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(PostItem, {\n      className: \"psot-item w-80 bg-white px-5 pb-2 pt-6 mb-6 m-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex mb-5 items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"profile-logo\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"rounded-full\",\n            src: thumbnail,\n            onClick: changeIcon,\n            alt: \"\\u30D7\\u30ED\\u30D5\\u30A3\\u30FC\\u30EB\\u753B\\u50CF\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 39\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n          style: {\n            display: 'none'\n          },\n          name: \"icon\",\n          id: \"icon\",\n          type: \"file\",\n          onChange: setImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"group_name\",\n          className: \"ml-4 w-7/10\",\n          defaultValue: groupData.group_name,\n          onChange: onChangeEvent\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"post-list-item truncate\",\n        children: gameName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"post-list-item\",\n        children: [\"\\u30B9\\u30BF\\u30A4\\u30EB:\", /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"style_id\",\n          className: \"ml-4 w-7/10\",\n          value: groupData.style_id,\n          onChange: onChangeEvent,\n          children: gameStyles.map(function (data, index) {\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              value: data.id,\n              children: data.style_name\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 19\n            }, _this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"post-list-item\",\n        children: [\"\\u52DF\\u96C6\\u4EBA\\u6570:\", /*#__PURE__*/_jsxDEV(InputText, {\n          name: \"recruitment\",\n          styled: \"ml-4 w-7/10\",\n          inputValue: groupData.recruitment,\n          onChange: onChangeEvent\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 44\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"post-list-item\",\n          children: [\"\\u53C2\\u52A0\\u4EBA\\u6570:\", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ml-2\",\n            children: groupData.participants\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 46\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: onClickToggle,\n          className: groupMember[0] ? \"\" : \"hidden\",\n          children: /*#__PURE__*/_jsxDEV(PrimaryButton, {\n            styles: \"bg-sub tex p-1 text-xs\",\n            children: \"\\u30E1\\u30F3\\u30D0\\u30FC\\u4E00\\u89A7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styledHidden,\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"friend-list mb-8\",\n          children: groupMember.map(function (data, index) {\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"flex items-center mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"firend-logo\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  className: \"rounded-full\",\n                  src: data.user.icon === null ? DefaultIcon : data.user.icon,\n                  alt: \"\\u30D7\\u30ED\\u30D5\\u30A3\\u30FC\\u30EB\\u753B\\u50CF\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 315,\n                  columnNumber: 48\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 315,\n                columnNumber: 21\n              }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"ml-2\",\n                children: data.user.user_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 21\n              }, _this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 19\n            }, _this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u30B0\\u30EB\\u30FC\\u30D7\\u8A73\\u7D30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"description\",\n        style: {\n          overflow: 'auto',\n          resize: 'none'\n        },\n        cols: \"30\",\n        rows: \"13\",\n        className: \"post-detail\",\n        defaultValue: groupData.description,\n        onChange: onChangeEvent\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(PrimaryButton, {\n        styles: \"bg-sub py-1 px-7 py-2 text-sm m-auto\",\n        onClick: onClickSaveGroupData,\n        children: \"\\u4FDD\\u5B58\\u3059\\u308B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 271,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(GroupEdit, \"g596Io6KekLalbqgeW8t64BwjiY=\", false, function () {\n  return [useHistory];\n});\n\n_c = GroupEdit;\nvar GroupDetailWrap = styled.section(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \\n\"])));\n_c2 = GroupDetailWrap;\nvar PostItem = styled.div(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  position: relative;\\n  .profile-logo img{\\n    width: 65px;\\n    height: 65px;\\n  }\\n  .firend-logo img{\\n    width: 40px;\\n    height: 40px;\\n  }\\n  .post-list-item{\\n    margin: 0 0 10px 0;\\n  }\\n  .post-list-item input{\\n    margin:0 0 0 10px;\\n  }\\n  .post-detail{\\n    width: 100%;\\n    margin: 0 0 18px 0;\\n    padding: 0 3px;\\n    border:solid 1px #000;\\n    overflow: hidden;\\n  }\\n  .primary-button{\\n    color:#fff;\\n  }\\n\"])));\n_c3 = PostItem;\nexport default GroupEdit;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"GroupEdit\");\n$RefreshReg$(_c2, \"GroupDetailWrap\");\n$RefreshReg$(_c3, \"PostItem\");","map":{"version":3,"sources":["/usr/src/app/src/pages/GroupEdit.jsx"],"names":["useState","useEffect","axios","useHistory","styled","PrimaryButton","InputText","Footer","HeaderBackButton","DefaultIcon","Joi","GroupEdit","props","gameStyles","setGameStyles","groupData","setGroupData","gameName","setGameName","thumbnail","setThumbnail","groupMember","setGroupMember","groupId","match","params","id","history","errorMessages","setValidationMessages","formData","setFormData","unmounted","getGroup","getGroupMember","getGameStyle","url","process","env","REACT_APP_BACKEND_PATH","get","then","res","data","results","catch","error","console","log","icon","group_name","style_id","recruitment","description","mst_game","game_name","schema","object","number","required","string","max","errors","forEach","err","type","message","context","limit","Error","styledHidden","setStyledHidden","onChangeEvent","e","name","target","value","onClickToggle","onClickSaveGroupData","formDatas","FormData","validationCheckFlag","validate","abortEarly","messages","split","append","config","headers","post","push","arr","Object","entries","response","setImage","files","undefined","file","alert","startsWith","window","URL","createObjectURL","changeIcon","document","getElementById","click","length","map","item","index","display","style_name","participants","user","user_name","overflow","resize","GroupDetailWrap","section","PostItem","div"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport { useHistory } from 'react-router-dom';\nimport styled from \"styled-components\";\nimport {\n  PrimaryButton,\n  InputText,\n  Footer,\n  HeaderBackButton\n} from '../components/index'\nimport DefaultIcon from '../images/default-icon.png'\nimport Joi from 'joi-browser';\n\nconst GroupEdit = (props) => {\n  const [gameStyles, setGameStyles] = useState([]);\n  const [groupData, setGroupData] = useState([]);\n  // オブジェクトになっているせいなのか、groupDataからmst_gameのゲーム名が取得できず、仕方なくゲーム名用の変数作成\n  // API呼び出し時にresponseから直接参照すると取得できるので、その際にこのgameNameにセットしている\n  // よく分からないので、とりあえずこの方法で対応\n  const [gameName, setGameName] = useState('');\n  const [thumbnail, setThumbnail] = useState(DefaultIcon);\n  const [groupMember, setGroupMember] = useState([]);\n  const groupId = props.match.params.id;\n  const history = useHistory();\n  const [errorMessages, setValidationMessages] = useState([])\n  const [formData, setFormData] = useState({\n    'id' : '',\n    'icon' : '',\n    'group_name' : '',\n    'style_id' : '',\n    'recruitment' : '',\n    'description' : '',\n  })\n\n  useEffect(() => {\n    let unmounted = false;\n    if(!unmounted) {\n      getGroup(groupId);\n      getGroupMember(groupId);\n      getGameStyle();\n    }\n  },[groupId])\n\n  const getGameStyle = () => {\n    let url = process.env.REACT_APP_BACKEND_PATH;\n\n    axios.get(url + '/api/game/styles')\n    .then((res) => {\n      setGameStyles(res.data.results);\n    })\n    .catch((error) => {\n      console.log(error)\n    })\n  }\n\n  const getGroup = (id) => {\n    let url = process.env.REACT_APP_BACKEND_PATH;\n\n    axios.get(url + '/api/groups/groupid/' + id)\n    .then((res) => {\n      const { id, icon, group_name, style_id, recruitment, description } = res.data.results;\n      setGroupData(res.data.results);\n      setThumbnail(res.data.results.icon === null ? DefaultIcon : res.data.results.icon);\n      setGameName(res.data.results.mst_game.game_name);\n      setFormData({\n        'id' : id,\n        'icon' : icon,\n        'group_name' : group_name,\n        'style_id' : style_id,\n        'recruitment' : recruitment,\n        'description' : description,\n      });\n    })\n    .catch((error) => {\n      console.log(error)\n    })\n  }\n\n  const getGroupMember = (id) => {\n    let url = process.env.REACT_APP_BACKEND_PATH;\n\n    axios.get(url + '/api/group/member/' + id)\n    .then((res) => {\n      setGroupMember(res.data.results);\n    })\n    .catch((error) => {\n      console.log(error)\n    })\n  }\n\n  const schema = Joi.object({\n    id: Joi.number()\n      .required(),\n  \n    icon: Joi,\n  \n    group_name: Joi.string()\n      .max(256)\n      .required()\n      .error(errors => {\n        errors.forEach(err => {\n          switch (err.type) {\n            case \"any.empty\":\n              err.message = \"＊グループ名は必須です\";\n              break;\n            case \"string.max\":\n              err.message = `＊グループ名は${err.context.limit}文字以内で設定してください`;\n              break;\n            default:\n              break;\n          }\n        });\n        return new Error(errors);\n      }),\n  \n    style_id: Joi.number()\n      .required()\n      .error(errors => {\n        errors.forEach(err => {\n          switch (err.type) {\n            case \"any.empty\":\n              err.message = \"＊スタイルは必須です\";\n              break;\n            case \"number.base\":\n              err.message = `＊スタイルは選択肢から選んでください`;\n              break;\n            default:\n              break;\n          }\n        });\n        return new Error(errors);\n      }),\n  \n    recruitment: Joi.number()\n      .required()\n      .error(errors => {\n        errors.forEach(err => {\n          switch (err.type) {\n            case \"any.empty\":\n              err.message = \"＊募集人数は必須です\";\n              break;\n            case \"number.base\":\n              err.message = `＊募集人数は数字を指定してください`;\n              break;\n            default:\n              break;\n          }\n        });\n        return new Error(errors);\n      }),\n  \n    description: Joi.string()\n      .required()\n      .max(5000)\n      .error(errors => {\n        errors.forEach(err => {\n          switch (err.type) {\n            case \"any.empty\":\n              err.message = \"＊詳細は必須です\";\n              break;\n            case \"string.max\":\n              err.message = `＊詳細は${err.context.limit}文字以内で設定してください`;\n              break;\n            default:\n              break;\n          }\n        });\n        return new Error(errors);\n      }),\n  })\n  \n  const [styledHidden, setStyledHidden] = useState(\"hidden\")\n  \n  const onChangeEvent = (e) => {\n    const name = e.target.name;\n    setFormData({\n      ...formData,\n      [name]: e.target.value\n    });\n  }\n\n  const onClickToggle = () => {\n    setStyledHidden(!styledHidden　? \"hidden\" : \"\" );\n  }\n\n  const onClickSaveGroupData = () => {\n    let url = process.env.REACT_APP_BACKEND_PATH;\n    let formDatas = new FormData();\n    let validationCheckFlag = false;\n\n    // バリデーション実行\n    const { error } = schema.validate(formData, {abortEarly: false});\n\n    if(error) {\n      let messages = error.message.split(',');\n      setValidationMessages(messages);\n      return false;\n    } else {\n      validationCheckFlag = true;\n    }\n\n    formDatas.append(\"id\", formData.id)\n    formDatas.append(\"icon\", formData.icon)\n    formDatas.append(\"group_name\", formData.group_name)\n    formDatas.append(\"style_id\", formData.style_id)\n    formDatas.append(\"recruitment\", formData.recruitment)\n    formDatas.append(\"description\", formData.description)\n\n    const config = {\n      headers: {\n        \"content-type\": \"multipart/form-data\"\n      }\n    }\n\n    if(validationCheckFlag) {\n      axios.post(url + '/api/group/edit', formDatas, config)\n      .then((res) => {\n        history.push('/group/detail/' + res.data.results.id);\n      })\n      .catch((error) => {\n        // エラーメッセージの配列を用意\n        let messages = [];\n        // レスポンスをオブジェクトから配列に変換\n        let arr = Object.entries(error.response.data.errors);\n        // レスポンスの配列からメッセージだけを取り出し、エラーメッセージの配列にセット\n        arr.forEach(function (value) {\n          messages.push(value[1][0]);\n        })\n        // 表示用の配列にセット\n        setValidationMessages(messages);\n      })\n    }\n  }\n\n  const setImage = (e) => {\n    const name = e.target.name;\n    const files = e.target;\n\n    if (files.files[0] !== undefined) {\n      const file = files.files[0]\n      const type = file.type\n      if (\n          type !== \"image/jpeg\" &&\n          type !== \"image/png\" &&\n          type !== \"image/webp\"\n      ) {\n          alert(\"選択されたファイルはアップロードできません\")\n          return false\n      }\n      setFormData({\n        ...formData,\n        [name]: file\n      });\n      if (type.startsWith(\"image/\")) {\n        setThumbnail(window.URL.createObjectURL(file))\n      }\n    } else {\n      setFormData({\n        ...formData,\n        [name]: ''\n      });\n    }\n  }\n\n  const changeIcon = () => {\n    let icon = document.getElementById('icon');\n    icon.click();\n  }\n\n  return (\n    <GroupDetailWrap className=\"h-screen bg-sub py-16\">\n      <HeaderBackButton />\n      <div className={ errorMessages.length === 0 ? 'hidden' : 'bg-red-100 w-80 mx-auto p-1 mb-2' }>\n        <ul className=\"mx-auto px-3 text-red-600\">\n          {\n          errorMessages.map((item, index) => {\n            return (\n                <li key={ index }>{ item }</li>\n                )\n              })\n          }\n        </ul>\n      </div>\n      <PostItem className=\"psot-item w-80 bg-white px-5 pb-2 pt-6 mb-6 m-auto\">\n        <div className=\"flex mb-5 items-center\">\n          <p className=\"profile-logo\"><img className=\"rounded-full\" src={ thumbnail } onClick={ changeIcon } alt=\"プロフィール画像\" /></p>\n          <input style={{display: 'none'}} name=\"icon\" id=\"icon\" type=\"file\" onChange={setImage} />\n          <input type=\"text\" name=\"group_name\" className=\"ml-4 w-7/10\" defaultValue={ groupData.group_name } onChange={ onChangeEvent } />\n        </div>\n        <p className=\"post-list-item truncate\">{ gameName }</p>\n        <p className=\"post-list-item\">スタイル:\n          <select name=\"style_id\" className=\"ml-4 w-7/10\" value={ groupData.style_id } onChange={ onChangeEvent }>\n            {\n              gameStyles.map((data, index) => {\n                return (\n                  <option key={ index } value={ data.id }>{ data.style_name }</option>\n                );\n              })\n            }\n          </select>\n        </p>\n        <p className=\"post-list-item\">募集人数:<InputText name=\"recruitment\" styled={\"ml-4 w-7/10\"} inputValue={ groupData.recruitment } onChange={ onChangeEvent } /></p>\n        <div className=\"flex justify-between mb-4\">\n          <p className=\"post-list-item\">参加人数:<span className=\"ml-2\">{ groupData.participants }</span></p>\n          <div onClick={ onClickToggle } className={ groupMember[0] ? \"\" : \"hidden\" }>\n            <PrimaryButton styles={\"bg-sub tex p-1 text-xs\"}>メンバー一覧</PrimaryButton>\n          </div>\n        </div>\n        <div className={ styledHidden }>\n          <ul className=\"friend-list mb-8\">\n            {\n              groupMember.map((data, index) => {\n                return (\n                  <li key={index} className=\"flex items-center mb-3\">\n                    <p className=\"firend-logo\"><img className=\"rounded-full\" src={ data.user.icon === null ? DefaultIcon : data.user.icon } alt=\"プロフィール画像\" /></p>\n                    <p className=\"ml-2\">{ data.user.user_name }</p>\n                  </li>\n                )\n              })\n            }\n          </ul>\n        </div>\n        <p>グループ詳細</p>\n        <textarea name=\"description\" style={{ overflow:'auto', resize: 'none'}} cols=\"30\" rows=\"13\"　className=\"post-detail\" defaultValue={ groupData.description } onChange={ onChangeEvent }></textarea>\n        <PrimaryButton styles={ \"bg-sub py-1 px-7 py-2 text-sm m-auto\" } onClick={ onClickSaveGroupData }>保存する</PrimaryButton>\n      </PostItem>\n      <Footer />\n    </GroupDetailWrap>\n  )\n}\n\nconst GroupDetailWrap = styled.section`\n  \n`\nconst PostItem = styled.div`\n  position: relative;\n  .profile-logo img{\n    width: 65px;\n    height: 65px;\n  }\n  .firend-logo img{\n    width: 40px;\n    height: 40px;\n  }\n  .post-list-item{\n    margin: 0 0 10px 0;\n  }\n  .post-list-item input{\n    margin:0 0 0 10px;\n  }\n  .post-detail{\n    width: 100%;\n    margin: 0 0 18px 0;\n    padding: 0 3px;\n    border:solid 1px #000;\n    overflow: hidden;\n  }\n  .primary-button{\n    color:#fff;\n  }\n`\n\nexport default GroupEdit"]},"metadata":{},"sourceType":"module"}