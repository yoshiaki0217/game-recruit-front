{"ast":null,"code":"import _taggedTemplateLiteral from \"/usr/src/app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";\nimport _slicedToArray from \"/usr/src/app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/usr/src/app/src/components/SearchModal.jsx\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _templateObject;\n\nimport styled from \"styled-components\";\nimport { InputText, PrimaryButton } from \"./index\";\nimport CloseButton from \"../images/close-search.svg\";\nimport { Post } from '../pages/PostIndex';\nimport { useState, useEffect, useContext } from \"react\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar SearchModal = function SearchModal(props) {\n  _s();\n\n  var onClickSearch = props.onClickSearch,\n      styledNone = props.styledNone;\n\n  var _useContext = useContext(Post),\n      postDetail = _useContext.postDetail,\n      setSearchedPostDetail = _useContext.setSearchedPostDetail;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      groupStyles = _useState2[0],\n      setGroupStyles = _useState2[1];\n\n  useEffect(function () {\n    getGroupStyle();\n  }, []);\n\n  var searchPost = function searchPost(e) {\n    var searchWord = {};\n    e.preventDefault();\n    var target = e.target;\n    var children = target.querySelectorAll('input, select');\n    children.forEach(function (e) {\n      if (e.name === 'style_id') {\n        if (!(e.value === '0')) {\n          searchWord[e.name] = e.value;\n        }\n      } else if (e.value) {\n        searchWord[e.name] = e.value;\n      }\n    });\n    var data = postDetail.filter(function (item) {\n      var matchFlag = false;\n\n      for (var searchItem in searchWord) {\n        if (searchItem === 'keyword') {\n          if (item.group_detail.group_name.indexOf(searchWord[searchItem]) > -1 || item.group_detail.description.indexOf(searchWord[searchItem]) > -1 || item.group_detail.mst_game.game_name.indexOf(searchWord[searchItem]) > -1) {\n            matchFlag = true;\n          }\n        }\n\n        if (searchItem === 'style_id') {\n          if (String(item.group_detail.style_id) === searchWord[searchItem]) {\n            matchFlag = true;\n          }\n        }\n\n        if (searchItem === 'recruitment') {\n          if (item.group_detail.recruitment === searchWord[searchItem]) {\n            matchFlag = true;\n          }\n        }\n      }\n\n      return matchFlag;\n    });\n\n    if (!Object.keys(searchWord).length) {\n      setSearchedPostDetail(postDetail);\n    } else {\n      setSearchedPostDetail(data);\n    }\n  };\n\n  var getGroupStyle = function getGroupStyle() {\n    var url = process.env.REACT_APP_BACKEND_PATH;\n    axios.get(url + '/api/game/styles').then(function (res) {\n      setGroupStyles(res.data.results);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(ButtnWrap, {\n    className: styledNone ? \"hidden\" : \"bg-gray-500 bg-opacity-50 fixed flex items-center justify-center h-screen w-full z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-main w-80 mx-auto px-2 py-4 justify-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClickSearch,\n        className: \"ml-auto block mb-5\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: CloseButton,\n          alt: \"\\u9589\\u3058\\u308B\\u30DC\\u30BF\\u30F3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: searchPost,\n        children: [/*#__PURE__*/_jsxDEV(InputText, {\n          name: \"keyword\",\n          styled: \"mb-4 block w-9/10 h-10 m-auto pl-2\",\n          placeholder: \"キーワード\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"style_id\",\n          className: \"mb-4 block w-9/10 h-10 m-auto pl-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"0\",\n            children: \"\\u30B9\\u30BF\\u30A4\\u30EB\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, _this), groupStyles.map(function (data, index) {\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              value: data.id,\n              children: data.style_name\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 17\n            }, _this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(InputText, {\n          name: \"recruitment\",\n          styled: \"mb-4 block w-9/10 h-10 m-auto pl-2\",\n          placeholder: \"募集人数\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(PrimaryButton, {\n          type: \"submit\",\n          styles: \"bg-sub px-2 py-1 m-auto\",\n          children: \"\\u3053\\u306E\\u6761\\u4EF6\\u3067\\u7D5E\\u308A\\u8FBC\\u3080\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(SearchModal, \"QIeIzSVvNVkliBQsVTtPEJ5AgGE=\");\n\n_c = SearchModal;\nexport default SearchModal;\nvar ButtnWrap = styled.section(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  .search-modal-open{\\n    background: #4E0866;\\n    padding: 1rem 1rem 3rem 1rem;\\n    position: absolute;\\n    top: 10%;\\n    left: 50%;\\n    transform: translate(-50%);\\n    width: 80%;\\n    z-index: 99;\\n  }\\n  .search-modal-close{\\n    display: none;\\n  }\\n\"])));\n_c2 = ButtnWrap;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"SearchModal\");\n$RefreshReg$(_c2, \"ButtnWrap\");","map":{"version":3,"sources":["/usr/src/app/src/components/SearchModal.jsx"],"names":["styled","InputText","PrimaryButton","Post","useState","useEffect","useContext","axios","SearchModal","props","onClickSearch","styledNone","postDetail","setSearchedPostDetail","groupStyles","setGroupStyles","getGroupStyle","searchPost","e","searchWord","preventDefault","target","children","querySelectorAll","forEach","name","value","data","filter","item","matchFlag","searchItem","group_detail","group_name","indexOf","description","mst_game","game_name","String","style_id","recruitment","Object","keys","length","url","process","env","REACT_APP_BACKEND_PATH","get","then","res","results","catch","error","console","log","CloseButton","map","index","id","style_name","ButtnWrap","section"],"mappings":"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","sourcesContent":["import styled from \"styled-components\";\nimport { InputText, PrimaryButton } from \"./index\"\nimport CloseButton from '../images/close-search.svg'\nimport { Post } from '../pages/PostIndex'\nimport { useState, useEffect, useContext } from \"react\";\nimport axios from 'axios'\n\nconst SearchModal = (props) => {\n  const { onClickSearch,styledNone } = props;\n  const {postDetail, setSearchedPostDetail} = useContext(Post);\n  const [groupStyles, setGroupStyles] = useState([]);\n\n  useEffect(() => {\n    getGroupStyle();\n  },[])\n\n  const searchPost = (e) => {\n    let searchWord = {};\n    e.preventDefault();\n\n    let target = e.target;\n    let children = target.querySelectorAll('input, select')\n    children.forEach(function (e) {\n      if(e.name === 'style_id') {\n        if(!(e.value === '0')) {\n          searchWord[e.name] = e.value;\n        }\n      } else if(e.value){\n        searchWord[e.name] = e.value;\n      }\n    })\n    \n    let data = postDetail.filter((item) => {\n      let matchFlag = false;\n\n      for (let searchItem in searchWord) {\n        if(searchItem === 'keyword') {\n          if((item.group_detail.group_name.indexOf(searchWord[searchItem]) > -1)\n          || (item.group_detail.description.indexOf(searchWord[searchItem]) > -1)\n          || (item.group_detail.mst_game.game_name.indexOf(searchWord[searchItem]) > -1)) {\n            matchFlag = true;\n          }\n        }\n        if(searchItem === 'style_id') {\n          if((String(item.group_detail.style_id) === searchWord[searchItem] )) {\n            matchFlag = true;\n          }\n        }\n        if(searchItem === 'recruitment') {\n          if((item.group_detail.recruitment === searchWord[searchItem])) {\n            matchFlag = true;\n          }\n        }\n      }\n      return matchFlag;\n    })\n\n    if(!Object.keys(searchWord).length) {\n      setSearchedPostDetail(postDetail);\n    } else {\n      setSearchedPostDetail(data);\n    }\n  }\n\n  const getGroupStyle = () => {\n    let url = process.env.REACT_APP_BACKEND_PATH;\n\n    axios.get(url + '/api/game/styles')\n    .then((res) => {\n      setGroupStyles(res.data.results);\n    })\n    .catch((error) => {\n      console.log(error)\n    })\n  }\n\n  return (\n    <ButtnWrap className={styledNone ? \"hidden\" : \"bg-gray-500 bg-opacity-50 fixed flex items-center justify-center h-screen w-full z-50\"}>\n      <div className=\"bg-main w-80 mx-auto px-2 py-4 justify-center\">\n        <button onClick={ onClickSearch } className=\"ml-auto block mb-5\">\n          <img src={ CloseButton } alt=\"閉じるボタン\" />\n        </button>\n        <form onSubmit={searchPost}>\n          <InputText name={ \"keyword\" } styled={ \"mb-4 block w-9/10 h-10 m-auto pl-2\" } placeholder={ \"キーワード\" } />\n          <select name=\"style_id\" className=\"mb-4 block w-9/10 h-10 m-auto pl-2\">\n            <option value=\"0\">スタイル</option>\n            {\n            groupStyles.map((data, index) => {\n              return (\n                <option key={ index } value={ data.id }>{ data.style_name }</option>\n              )\n            })\n            }\n          </select>\n          <InputText name={ \"recruitment\" } styled={ \"mb-4 block w-9/10 h-10 m-auto pl-2\" } placeholder={ \"募集人数\" } />\n          <PrimaryButton type={ \"submit\" } styles={ \"bg-sub px-2 py-1 m-auto\" } >この条件で絞り込む</PrimaryButton>\n        </form>\n      </div>\n    </ButtnWrap>\n  )\n}\n\nexport default SearchModal\n\nconst ButtnWrap = styled.section`\n  .search-modal-open{\n    background: #4E0866;\n    padding: 1rem 1rem 3rem 1rem;\n    position: absolute;\n    top: 10%;\n    left: 50%;\n    transform: translate(-50%);\n    width: 80%;\n    z-index: 99;\n  }\n  .search-modal-close{\n    display: none;\n  }\n`"]},"metadata":{},"sourceType":"module"}